{% macro search_form(digit1, digit2, digit3, digit4, letter1, letter2, letter3, sort_by, valid_letters, letter_arabic, plate_type, digit_count, action="/") %}
<div class="search-container">
    <form method="get" class="search-form" action="{{ action }}">
        <div class="search-group">
            <label>Plate Number:</label>
            <div class="number-dropdowns">
                <select name="digit1" class="digit-select">
                    <option value="">Any</option>
                    {% for i in range(10) %}
                    <option value="{{ i }}" {% if digit1 == i|string %}selected{% endif %}>{{ i }}</option>
                    {% endfor %}
                </select>
                <select name="digit2" class="digit-select">
                    <option value="">Any</option>
                    {% for i in range(10) %}
                    <option value="{{ i }}" {% if digit2 == i|string %}selected{% endif %}>{{ i }}</option>
                    {% endfor %}
                </select>
                <select name="digit3" class="digit-select">
                    <option value="">Any</option>
                    {% for i in range(10) %}
                    <option value="{{ i }}" {% if digit3 == i|string %}selected{% endif %}>{{ i }}</option>
                    {% endfor %}
                </select>
                <select name="digit4" class="digit-select">
                    <option value="">Any</option>
                    {% for i in range(10) %}
                    <option value="{{ i }}" {% if digit4 == i|string %}selected{% endif %}>{{ i }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="search-group">
            <label>Plate Letters:</label>
            <div class="letter-dropdowns">
                <select name="letter1" class="letter-select">
                    <option value="">Any</option>
                    {% for letter in valid_letters %}
                    <option value="{{ letter }}" {% if letter1 == letter %}selected{% endif %}>
                        {{ letter }} ({{ letter_arabic[letter] }})
                    </option>
                    {% endfor %}
                </select>
                <select name="letter2" class="letter-select">
                    <option value="">Any</option>
                    {% for letter in valid_letters %}
                    <option value="{{ letter }}" {% if letter2 == letter %}selected{% endif %}>
                        {{ letter }} ({{ letter_arabic[letter] }})
                    </option>
                    {% endfor %}
                </select>
                <select name="letter3" class="letter-select">
                    <option value="">Any</option>
                    {% for letter in valid_letters %}
                    <option value="{{ letter }}" {% if letter3 == letter %}selected{% endif %}>
                        {{ letter }} ({{ letter_arabic[letter] }})
                    </option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="filter-row">
            <div class="search-group half-width">
                <label>Plate Type:</label>
                <select name="plate_type" class="plate-type-select">
                    <option value="">Any</option>
                    <option value="private" {% if plate_type == 'private' %}selected{% endif %}>Private</option>
                    <option value="commercial" {% if plate_type == 'commercial' %}selected{% endif %}>Commercial</option>
                </select>
            </div>

            <div class="search-group half-width">
                <label>Digit Count:</label>
                <select name="digit_count" class="digit-count-select">
                    <option value="">Any</option>
                    <option value="single" {% if digit_count == 'single' %}selected{% endif %}>Single Digit</option>
                    <option value="double" {% if digit_count == 'double' %}selected{% endif %}>Double Digit</option>
                    <option value="triple" {% if digit_count == 'triple' %}selected{% endif %}>Triple Digit</option>
                </select>
            </div>
        </div>

        <div class="sort-container">
            <label for="sort_by">Sort By:</label>
            <select name="sort_by" id="sort_by">
                <option value="newest" {% if sort_by == 'newest' %}selected{% endif %}>Newest First</option>
                <option value="oldest" {% if sort_by == 'oldest' %}selected{% endif %}>Oldest First</option>
                <option value="price_high" {% if sort_by == 'price_high' %}selected{% endif %}>Most Expensive</option>
                <option value="price_low" {% if sort_by == 'price_low' %}selected{% endif %}>Cheapest</option>
            </select>
        </div>

        <button type="submit" class="search-button">Search</button>
    </form>
</div>

<style>
.filter-row {
    display: flex;
    justify-content: space-between;
    gap: 20px;
    margin-bottom: 15px;
}

.half-width {
    flex: 1;
    min-width: 0;
}

.half-width select {
    width: 100%;
}

.search-group {
    margin-bottom: 15px;
}

.search-group label {
    display: block;
    margin-bottom: 5px;
}

.search-group select {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    background-color: white;
}
</style>
{% endmacro %} 